<html>
<title>TODO APP</title>
<head>
    <link rel="stylesheet" href="index.css">
    <script>


        function markChecked(){
            if (this.classList.value !=="checked"){
                let today = new Date();
                let date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
                let time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
                let dateTime = date+' '+time;
                this.classList.value="checked"
                let span = document.createElement("span")
                let text = document.createTextNode("Done at: "+dateTime)
                span.className = "done";
                span.appendChild(text)
                this.appendChild(span)
            } else if (this.classList.value ==="checked"){
                this.classList.value ="listItem"
                this.children.item(1).remove()
            }

        }
        function newElement() {
            let close = document.getElementsByClassName("close");
            let todoTask = document.getElementById('myInput').value
            let li = document.createElement("li");
            let t = document.createTextNode(todoTask);
            li.classList.add("listItem")
            li.addEventListener("click", markChecked)
            li.appendChild(t);
            if (todoTask === '') {
                alert("You can not add empty task right?!");
            } else {
                document.getElementById("myUL").appendChild(li);
            }
            document.getElementById("myInput").value = ""; //after the getting input reset the input area

            let span = document.createElement("SPAN");
            let txt = document.createTextNode("Delete");
            span.className = "close";
            span.appendChild(txt);
            li.appendChild(span);

            // give close button a on click event
            for (i = 0; i < close.length; i++) {
                close[i].onclick = function () {
                    this.parentElement.remove()
                }
            }

        }
    </script>
</head>
<body>
<div id="myDIV" class="header">
    <h2>My To Do List</h2>
    <input type="text" id="myInput" placeholder="Title...">
    <button onclick="newElement()" class="addBtn">Add</button>
</div>

<ul id="myUL">
</ul>

</div>

</body>
</html>